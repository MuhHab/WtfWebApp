@model ViewCommentsViewModel

<div class="commentsWrapper">
    <ul class="comments">
        @foreach (var comment in Model.Comments)
        {
            <li class="comment" id="comment-@comment.Id">
                <div class="avatarContainer">
                    @if (!string.IsNullOrEmpty(comment.ImageUrl))
                    {
                        <div class="imgContainer">
                            <img src="@comment.ImageUrl" />
                        </div>
                    }
                </div>
                <span class="poster">@comment.Username</span>
                <span class="timestamp">
                    <a href="#comment-@comment.Id">#@comment.Id</a>
                    @comment.PublishedDate
                    @if (Model.CanFeature)
                    {
                        <br />
                        var action = comment.Featured ? "Unfeature" : "Feature";
                        using (Html.BeginForm(action + "Comment", "Admin", FormMethod.Post))
                        {
                            @Html.Hidden("comment", comment.Id)
                            @Html.Hidden("article", Model.Article.Id)
                            @Html.AntiForgeryToken()
                            <button>@action</button>
                        }
                    }
                </span>
                <div>
                    @Html.Raw(comment.BodyHtml)
                </div>
                @if (Model.CanReply)
                {
                    <aside><button onclick="document.getElementById('comment-parent').value = @comment.Id">Reply</button></aside>
                }
            </li>
        }
        @if (Model.PageCount == 0)
        {
            <li>There are no comments yet.</li>
        }
    </ul>
</div>
